<html>
	<head>

<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-THXPDD2');</script>
<!-- End Google Tag Manager -->

  <title>CRC calculator for Wireless M-Bus by STACKFORCE</title>

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
  <link href="/application/files/cache/css/stackforce/main.css?ts=1523309067" rel="stylesheet" type="text/css" media="all">

  <style>
  body {
    font-family: 'Open Sans', 'Tahoma', sans-serif;
    padding: 15px;
  }
  a {
    color: #5da029;
  }
  a:hover {
    color: #6abb2f;
  }
  pre {
    background-color: white;
    border: none;
  }
  .container {
    margin-top: 30px;
  }
  </style>
	</head>
	<body>

<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-THXPDD2"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

<script type="text/javascript">

/**
 * Table for the crc-calculation. (lokk at crc_calc)
 */
var crc_table = new Array( 
  0x0000, 0x3d65, 0x7aca, 0x47af, 0xf594, 0xc8f1, 0x8f5e, 0xb23b, 
  0xd64d, 0xeb28, 0xac87, 0x91e2, 0x23d9, 0x1ebc, 0x5913, 0x6476, 
  0x91ff, 0xac9a, 0xeb35, 0xd650, 0x646b, 0x590e, 0x1ea1, 0x23c4, 
  0x47b2, 0x7ad7, 0x3d78, 0x001d, 0xb226, 0x8f43, 0xc8ec, 0xf589, 
  0x1e9b, 0x23fe, 0x6451, 0x5934, 0xeb0f, 0xd66a, 0x91c5, 0xaca0, 
  0xc8d6, 0xf5b3, 0xb21c, 0x8f79, 0x3d42, 0x0027, 0x4788, 0x7aed, 
  0x8f64, 0xb201, 0xf5ae, 0xc8cb, 0x7af0, 0x4795, 0x003a, 0x3d5f, 
  0x5929, 0x644c, 0x23e3, 0x1e86, 0xacbd, 0x91d8, 0xd677, 0xeb12, 
  0x3d36, 0x0053, 0x47fc, 0x7a99, 0xc8a2, 0xf5c7, 0xb268, 0x8f0d, 
  0xeb7b, 0xd61e, 0x91b1, 0xacd4, 0x1eef, 0x238a, 0x6425, 0x5940, 
  0xacc9, 0x91ac, 0xd603, 0xeb66, 0x595d, 0x6438, 0x2397, 0x1ef2, 
  0x7a84, 0x47e1, 0x004e, 0x3d2b, 0x8f10, 0xb275, 0xf5da, 0xc8bf, 
  0x23ad, 0x1ec8, 0x5967, 0x6402, 0xd639, 0xeb5c, 0xacf3, 0x9196, 
  0xf5e0, 0xc885, 0x8f2a, 0xb24f, 0x0074, 0x3d11, 0x7abe, 0x47db, 
  0xb252, 0x8f37, 0xc898, 0xf5fd, 0x47c6, 0x7aa3, 0x3d0c, 0x0069, 
  0x641f, 0x597a, 0x1ed5, 0x23b0, 0x918b, 0xacee, 0xeb41, 0xd624, 
  0x7a6c, 0x4709, 0x00a6, 0x3dc3, 0x8ff8, 0xb29d, 0xf532, 0xc857, 
  0xac21, 0x9144, 0xd6eb, 0xeb8e, 0x59b5, 0x64d0, 0x237f, 0x1e1a, 
  0xeb93, 0xd6f6, 0x9159, 0xac3c, 0x1e07, 0x2362, 0x64cd, 0x59a8, 
  0x3dde, 0x00bb, 0x4714, 0x7a71, 0xc84a, 0xf52f, 0xb280, 0x8fe5, 
  0x64f7, 0x5992, 0x1e3d, 0x2358, 0x9163, 0xac06, 0xeba9, 0xd6cc, 
  0xb2ba, 0x8fdf, 0xc870, 0xf515, 0x472e, 0x7a4b, 0x3de4, 0x0081, 
  0xf508, 0xc86d, 0x8fc2, 0xb2a7, 0x009c, 0x3df9, 0x7a56, 0x4733, 
  0x2345, 0x1e20, 0x598f, 0x64ea, 0xd6d1, 0xebb4, 0xac1b, 0x917e, 
  0x475a, 0x7a3f, 0x3d90, 0x00f5, 0xb2ce, 0x8fab, 0xc804, 0xf561, 
  0x9117, 0xac72, 0xebdd, 0xd6b8, 0x6483, 0x59e6, 0x1e49, 0x232c, 
  0xd6a5, 0xebc0, 0xac6f, 0x910a, 0x2331, 0x1e54, 0x59fb, 0x649e, 
  0x00e8, 0x3d8d, 0x7a22, 0x4747, 0xf57c, 0xc819, 0x8fb6, 0xb2d3, 
  0x59c1, 0x64a4, 0x230b, 0x1e6e, 0xac55, 0x9130, 0xd69f, 0xebfa, 
  0x8f8c, 0xb2e9, 0xf546, 0xc823, 0x7a18, 0x477d, 0x00d2, 0x3db7, 
  0xc83e, 0xf55b, 0xb2f4, 0x8f91, 0x3daa, 0x00cf, 0x4760, 0x7a05, 
  0x1e73, 0x2316, 0x64b9, 0x59dc, 0xebe7, 0xd682, 0x912d, 0xac48
);

function isHexValue(value)
{
  var currChar = value.charCodeAt(0);
  if((currChar >= 48 && currChar <= 57) ||
     (currChar >= 97 && currChar <= 102))
  {
    return true;
  }
  return false;
}
function filterInputChars(filterValue)
{
  var filtered = "";
  for(var i=0; i < filterValue.length; i++)
  {
    if(filterValue[i] == '0' && filterValue[i] == 'x') {
      /* omit '0x' indicating hex */
      i++;
    }
    else if(filterValue[i] == 'x') {
      /* omit 'x' indicating hex */
    }
    else if(isHexValue(filterValue[i])) {
      filtered = filtered + filterValue[i];
    }
    else if(filterValue[i] == ' ') {
      /* ignore space */
    }            
    else
      return false;
  }
  if(filtered.length % 2)
    return false;
  return filtered;
}
function getHexChunks(value)
{
  var crcInput = filterInputChars(value.toLowerCase());
  if(crcInput === false)
    return false;
  var data = "";
  for(var i = 0;i < crcInput.length; i += 2)
  {
    if(data.length > 0)
      data = data + " ";
    data = data + crcInput[i] + crcInput[i+1];
  }
  return data.split(" ");
}
function calcCrc()
{
  var crc = 0;
  var data = getHexChunks(document.getElementById("crcInput").value);
  var dataOut = data;
  var len = ("00" + data.length.toString(16)).substr(-2);
  var lenInv = new Number(0xFF - data.length).toString(16);

  if(data === false) {
    alert("Something is wrong with your input data!");
    return;
  }
  for(var i = 0;i < data.length;i++)
  {
    data[i] = parseInt(data[i], 16);	
    crc = (crc << 8) ^ crc_table[((crc >> 8) & 0xFF) ^ data[i]];
    crc = crc & 0xFFFF;
  }
  crc = ((~crc) & 0xFFFF);
  
  var crc1 = crc >> 8;
  var crc2 = ( crc & 0x00FF ) << 8;
  crc2 = crc2 >> 8;
  
  for(var i = 0;i < data.length;i++)
  {
	dataOut[i] = ("00" + data[i].toString(16).toUpperCase()).substr(-2);
  }
  dataOut = dataOut.join(" ");
  var dataOut = "A5 00 "+len.toUpperCase()+" FF "+lenInv.toUpperCase()+" "+dataOut+" "+Number(crc1).toString(16).toUpperCase()+" "+Number(crc2).toString(16).toUpperCase();
  document.getElementById("dataOut").innerHTML = dataOut;
  document.getElementById("crcBytes").innerHTML = data.length;
}
</script>

  <div class="container">
    <div class="row">
      <div class="col-sm-12">
        <img width="20%" src="https://cdn.worldvectorlogo.com/logos/stackforce-logo-1.svg" />
        <h1 style="padding-top: 30px">CRC Calculation Module</h1>
      </div>
    </div>
  </div>
  
  <div class="container">
    <div class="row">
      <div class="col-sm-12">
        Enter bytes, separated by spaces:<br />
      </div>
    </div>
    <div class="row">
      <div class="col-sm-9">
        <!-- <textarea autofocus rows="3" style="width: 100%" id="crcInput"></textarea></br /> -->
        <input type="text" style="width:100%;" id="crcInput">
      </div>
      <div class="col-sm-3">
        <button onclick="javascript:calcCrc();">Calculate</button>
      </div>
    </div>
  </div>

  <div class="container" style="font-size: 150%">
    <div class="row">
      <div class="col-sm-9">
        <div style="font-weight: bold">
          SERIAL FRAME:
        </div>
      </div>
      <div class="row">
        <div class="col-sm-3">
          Input Length: <span id="crcBytes"></span> byte(s)<br />
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12" style="height: 2em">
        <span id="dataOut"></span>
      </div>
    </div>
  </div>

  <div class="container" style="margin-top: 100px">
    <div class="row">
      <div class="col-sm-12">
        <div style="margin-top: 10px; font-size: 0.7em;">
          <a href="https://www.stackforce.de">Â©2014-2020 STACKFORCE</a>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12">
        <pre>
___ _____ _   ___ _  _____ ___  ___  ___ ___
/ __|_   _/_\ / __| |/ / __/ _ \| _ \/ __| __|
\__ \ | |/ _ \ (__| ' <| _| (_) |   / (__| _|
|___/ |_/_/ \_\___|_|\_\_| \___/|_|_\\___|___|
embedded.connectivity.solutions.==============
        </pre>
      </div>
    </div>
  </div>

</body>
</html>